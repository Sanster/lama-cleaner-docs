import YouTube from "../components/youtube"

# Plugins

In the post-processing of image cleaning, in addition to erasing, algorithms such as facial repair or super-resolution are often used.
Now you can directly use them in Lama Cleaner. When starting the Lama Cleaner service, you can enable plugins through command line parameters.
And the enabled plugins will be available in the **top-left corner**.

<YouTube youTubeId="_33UWnqqFRc" />

<Callout type="info" emoji="ℹ️">
  Most plugins require `torchvision` to be installed, please follow pytorch's
  [get-started](https://pytorch.org/get-started/locally/) to install
  corresponding versions.
</Callout>

## RealESRGAN

[RealESRGAN](https://github.com/xinntao/Real-ESRGAN) is a library to do image Super-Resolution.

![realesrgan](../public/realesrgan_demo.jpeg)

Install dependency package:

```bash
pip install realesrgan
```

Command line argument to enable RealESRGAN:

```bash
--enable-realesrgan --realesrgan-model RealESRGAN_x4plus --realesrgan-device cuda
```

Available models:

1. RealESRGAN_x4plus: for general scenes
1. RealESRGAN_x4plus_anime_6B: optimized for anime images with much smaller model size.
1. realesr-general-x4v3: a tiny small model for general scenes

Available device:

1. cuda
1. cpu
1. mps

## GFPGAN

[GFPGAN](https://github.com/TencentARC/GFPGAN) is a library to do face restoration.

| Original                                |              GFPGAN Result              |
| :-------------------------------------- | :-------------------------------------: |
| ![old_gfpgan](../public/gfpgan_old.jpg) | ![new_gfpgan](../public/gfpgan_new.jpg) |

Install dependency package:

```bash
pip install gfpgan
```

Command line argument to enable GFPGAN:

```bash
--enable-gfpgan --gfpgan-device cuda
```

Available device:

1. cuda
2. cpu
3. mps

## RestoreFormer

[RestoreFormer](https://github.com/wzhouxiff/RestoreFormer) is a library to do face restoration.

Install dependency package:

```bash
pip install realesrgan
```

Command line argument to enable RestoreFormer:

```bash
--enable-restoreformer --restoreformer-device cuda
```

Available device:

1. cuda
2. cpu
3. mps

## Remove Background

[Remove background](https://github.com/danielgatis/rembg) from the picture, always run on CPU.

Install dependency package:

```bash
pip install rembg
```

Command line argument to enable Remove Background:

```bash
--enable-remove-bg
```

## Interactive Segmentation

The [Segment Anything Model](https://github.com/facebookresearch/segment-anything) can produce high quality object masks from user click.

Command line argument to enable Interactive Segmentation Plugin:

```bash
--enable-interactive-seg --interactive-seg-model=vit_l  --interactive-seg-device=cuda
```

The basic operation process is as follows:

- Toggle `Interactive Segmentation` mode
- Left click(positive) on the image to select things you want to mask
- Right click(negative) on the image to exclude things you don't want to mask
- Click `Accept`
- Complete the mask with the brush (If the result of interactive segmentation is not good)
- Inpainting!

<YouTube youTubeId="oLYNGFDI4dc" />

## Make GIF

Command line argument to enable Make GIF plugin:

```bash
--enable-gif
```
